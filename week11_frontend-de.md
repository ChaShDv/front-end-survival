# Week11\_FrontEnd DE

## 배송정보 입력

주문페이지는 기본적으로 장바구니와 매우 유사하다.

차이점은, 주문페이지에서는 장바구니를 받아와 다르게 보여주고, 주문할 수 있는 화면으로 넘겨주는 기능이 추가된다.

\- 유효성 검사를 할 때, 기본적으로 공백만 입력하지 않도록 trim()처리를 해준다.

도로명주소와 우편번호가 쌍을 이루도록 한다. 하나만 바꾸지 못하도록 한꺼번에 입력하도록 처리한다.

배송지 입력란은 코드가 길어질 수 있으므로 가독성을 위해 코드를 분리해준다.

(대략 소스파일 하나가 100라인이 넘어가지 않도록 한다고 생각하면 좋다)

\
주소는 기본적으로 ReadOnly 처리한다(임의로 잘못된 주소를 입력하지 못하도록 하기 위함)

주소처리할 떄, 우편번호 검색 기능을 사용하는 이유

1. 우편번호는 잘 외우지 않는다
2. 표준화된 정확한 주소(의 위치)를 얻기 위해



주소검색 서비스를 사용하기 위해, 파일 스크립트를 index.html에 추가한다(프로토콜은 ssl만 사용)

(자바/타입스크립트는 위에서부터 차례로 처리하기 떄문에, 스크립트를 먼저 배치해준다.)



여기서 사용하는 daum 서비스를 사용하기 위해, daum객체를 global로 잡아준다(style처럼)

우편번호 검색 모달(modal)을 보여주는 AddressSearch 컴포넌트를 만든다

리액트에서 dom을 쓰고싶을 떄 useRef를 사용한다(돔 객체를 얻을 수 있게 해준다)

테스트에서 wait()를 걸어주면, 중간단계를 확인할 수 있다. 문제가 있을 때, 멈춘 상태에서 디버깅할 수 있어 용이하다.

\


## 포트원 결제 요청

포트원 : 결제솔루션. 전 아임포트. 2.0버전보다는 안정적인 1.0버전을 사용. 결제 서비스의 다양한 기능을 제공한다.

포트원은 여러 PG사를 하나의 깔끔한 API로 사용할 수 있게 해주는 통합 결제 솔루션으로, 예전에는 “아임포트”란 이름으로 서비스했다. 가볍게 무료로 시작할 수 있고, 복잡한 심사 과정을 거치지 않아도 바로 결제 기능을 테스트할 수 있다. 이미 많은 기업에서 사용 중이므로 이번 기회에 사용법을 익혀두면 좋다.

관련 정보들은 .env 파일에서 관리/사용한다

#### **인증결제** 프로세스

1. 결제 요청 (F/E에서 요청) → 우리가 자주 보는 결제창이 뜬다.
2. 결제 결과 확인 (F/E에서 결과 받음)
3. 결제 금액 위변조 검증 → B/E로 결제 결과를 전송하면 B/E에서 처리
4. 결제 완료 → B/E에서 성공하면 F/E는 주문 완료 페이지로 이동.

포트원에 가입하고, 관리자 콘솔로 가서 기본적인 세팅을 진행한다.



**결제 연동 > 결제대행사 설정 및 추가**

1. 실 연동, 테스트 중 선택 → 우리는 “테스트”를 선택.
2. PG사 선택 → 원하는 것 아무거나.
3. “아임포트 결제모듈”을 누르면 우리가 선택한 PG사에 따라 적절한 선택지가 나옴.
4. “+ 추가” 버튼을 누르면 상세 정보를 입력할 수 있는데, 우리는 테스트라서 그냥 “저장” 버튼을 누르면 됨.
5. “PG상점아이디” 항목을 클릭하면 해당 정보가 복사된다. ⇒ 챙겨두자!

PG사를 “카카오페이”로 선택하면 부담 없이 테스트할 수 있기 때문에 이쪽을 추천

